"use strict";(self.webpackChunkleo_travels_app=self.webpackChunkleo_travels_app||[]).push([[958],{9958:(V,r,a)=>{a.r(r),a.d(r,{CouponsModule:()=>L});var d=a(6895),m=a(7337),f=a(4684),t=a(4650),s=a(4006),h=a(5412),C=a(3615),g=a(8142),x=a(1740),T=a(7188),_=a(8645),Z=a(5722);let M=(()=>{class e extends f.K{constructor(){super(...arguments),this.data=(0,t.f3M)(h.WI),this.dialogRef=(0,t.f3M)(h.so),this.loading=!1,this.minDate=new Date,this.products=[],this.form=this.fb.group({coupon:["",s.kI.required],descriptionName:["",s.kI.required],discount:[0,s.kI.required],startDate:[this.minDate,s.kI.required],endDate:["",s.kI.required],products:[null,s.kI.required]})}ngOnInit(){this.data&&(this.form.patchValue(this.data),this.form.get("endDate")?.setValue(new Date(this.data.endDate)),this.form.get("startDate")?.setValue(new Date(this.data.startDate))),this.getProducts()}getProducts(){this.baseService.getMethod("product").subscribe({next:o=>{this.products=o.data}})}validateAction(){if(!this.form.invalid){if(this.loading=!0,!this.data)return void this.save();this.update()}}update(){const o=this.form.getRawValue();this.baseService.patchMethod("discount-coupons/"+this.data._id,o).subscribe({next:()=>{this.messageService.succesMessage("succes.succesUpdate"),this.form.reset(),this.loading=!1,this.dialogRef.close({refresh:!0})},error:()=>this.loading=!1})}save(){const o=this.form.getRawValue();this.baseService.postMethod("discount-coupons",o).subscribe({next:()=>{this.messageService.succesMessage("succes.succesCreate"),this.form.reset(),this.loading=!1,this.dialogRef.close({refresh:!0})},error:()=>this.loading=!1})}}return e.\u0275fac=function(){let n;return function(i){return(n||(n=t.n5z(e)))(i||e)}}(),e.\u0275cmp=t.Xpm({type:e,selectors:[["app-form-coupon"]],features:[t.qOj],decls:23,vars:15,consts:[[3,"titleModal"],[3,"formGroup"],[1,"content-form"],[1,"grid-two-columns"],[1,"p-float-label"],["pInputText","","id","username","formControlName","coupon",1,"input-name"],["htmlFor","username"],["pInputText","","id","username","formControlName","descriptionName",1,"input-name"],["formControlName","products","defaultLabel","Seleccionar","optionValue","_id","optionLabel","name","display","chip",3,"options"],["id","float-input","formControlName","discount"],["for","float-input"],[1,"card","flex","justify-content-center"],["formControlName","startDate",3,"readonlyInput","minDate","showIcon","showTime","showSeconds"],["formControlName","endDate",3,"readonlyInput","minDate","showIcon","showTime","showSeconds"],[3,"disabledButton","loading","handleSaveButton"]],template:function(o,i){if(1&o&&(t._UZ(0,"app-title-modal",0),t.TgZ(1,"form",1)(2,"div",2)(3,"div",3)(4,"span",4),t._UZ(5,"input",5),t.TgZ(6,"label",6),t._uU(7,"Cupon"),t.qZA()(),t.TgZ(8,"span",4),t._UZ(9,"input",7),t.TgZ(10,"label",6),t._uU(11,"Descripci\xf3n"),t.qZA()()(),t.TgZ(12,"div",3),t._UZ(13,"p-multiSelect",8),t.TgZ(14,"span",4),t._UZ(15,"p-inputNumber",9),t.TgZ(16,"label",10),t._uU(17," Descuento "),t.qZA()()(),t.TgZ(18,"div",3)(19,"div",11),t._UZ(20,"p-calendar",12),t.qZA(),t._UZ(21,"p-calendar",13),t.qZA()()(),t.TgZ(22,"app-buttons-modal",14),t.NdJ("handleSaveButton",function(){return i.validateAction()}),t.qZA()),2&o){let p;t.Q6J("titleModal",i.data?"Actualizar cupon":"Crear cupon"),t.xp6(1),t.Q6J("formGroup",i.form),t.xp6(12),t.Q6J("options",i.products),t.xp6(7),t.Q6J("readonlyInput",!0)("minDate",i.minDate)("showIcon",!0)("showTime",!0)("showSeconds",!0),t.xp6(1),t.Q6J("readonlyInput",!0)("minDate",null==(p=i.form.get("startDate"))?null:p.value)("showIcon",!0)("showTime",!0)("showSeconds",!0),t.xp6(1),t.Q6J("disabledButton",i.form.invalid)("loading",i.loading)}},dependencies:[C.p,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,g.i,x.o,T.Rn,_.f,Z.NU],styles:[".custom-file-input[_ngcontent-%COMP%]{display:none}.custom-file-label[_ngcontent-%COMP%]{display:inline-block;padding:10px 20px;background-color:#222e5e;color:#fff;border-radius:5px;cursor:pointer}  .p-button{background:#222e5e}form[_ngcontent-%COMP%]{width:90%;margin:30px auto}.content-form[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-row-gap:30px}  p-inputNumber,   .p-inputnumber,   .p-multiselect,   .p-calendar, .input-name[_ngcontent-%COMP%]{width:100%}.content-three[_ngcontent-%COMP%]{width:335px;display:grid;grid-template-columns:repeat(3,1fr);gap:20px}.content-images[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:space-between;max-height:45px}.content-images[_ngcontent-%COMP%]   .p-fluid[_ngcontent-%COMP%]{width:75%}  .p-fluid .p-chips{max-height:45px}  .cdk-overlay-pane{min-width:70%}.grid-two-columns[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;column-gap:25px}  .p-calendar .p-datepicker{z-index:10000000000;position:initial;max-height:300px;overflow:auto}  .p-overlay-content{position:fixed}"]}),e})();var l=a(671),D=a(7392),y=a(266),v=a(9524);function A(e,n){1&e&&(t.TgZ(0,"th",15),t._uU(1," Cupon "),t.qZA())}function b(e,n){if(1&e&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.Q6J("matTooltipPosition","left")("matTooltip",o.coupon),t.xp6(1),t.hij(" ",o.coupon," ")}}function N(e,n){1&e&&(t.TgZ(0,"th",15),t._uU(1," Descripci\xf3n "),t.qZA())}function w(e,n){if(1&e&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.Q6J("matTooltipPosition","left")("matTooltip",o.descriptionName),t.xp6(1),t.hij(" ",o.descriptionName," ")}}function U(e,n){1&e&&(t.TgZ(0,"th",15),t._uU(1," discount "),t.qZA())}function S(e,n){if(1&e&&(t.TgZ(0,"td",17),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.hij(" ",o.discount," ")}}function B(e,n){1&e&&(t.TgZ(0,"th",15),t._uU(1," Fecha activaci\xf3n "),t.qZA())}function F(e,n){if(1&e&&(t.TgZ(0,"td",17),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,o.startDate,"MM/dd/Y H:m:ss")," ")}}function J(e,n){1&e&&(t.TgZ(0,"th",15),t._uU(1," Fecha vencimiento "),t.qZA())}function O(e,n){if(1&e&&(t.TgZ(0,"td",17),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,o.endDate,"MM/dd/Y H:m:ss")," ")}}function P(e,n){1&e&&(t.TgZ(0,"th",15),t._uU(1," Fecha actualizaci\xf3n "),t.qZA())}function Q(e,n){if(1&e&&(t.TgZ(0,"td",17),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,o.updatedAt,"MM/dd/Y H:m:ss")," ")}}function Y(e,n){1&e&&(t.TgZ(0,"th",15),t._uU(1," Acciones "),t.qZA())}function I(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"td",17)(1,"mat-icon",18),t.NdJ("click",function(){const c=t.CHM(o).$implicit,u=t.oxw();return t.KtG(u.openModal(c))}),t._uU(2,"edit"),t.qZA(),t.TgZ(3,"mat-icon",18),t.NdJ("click",function(){const c=t.CHM(o).$implicit,u=t.oxw();return t.KtG(u.confirmRemove(c))}),t._uU(4," delete "),t.qZA()()}}function R(e,n){1&e&&t._UZ(0,"tr",19)}function j(e,n){1&e&&t._UZ(0,"tr",20)}const k=[{path:"",component:(()=>{class e extends f.K{constructor(){super(...arguments),this.createModal=M,this.displayedColumns=["coupon","description","discount","startDate","endDate","updatedAt","actions"],this.dataSource=[]}ngOnInit(){this.getAll()}ngOnDestroy(){this.$dialog&&this.$dialog.unsubscribe()}getAll(){this.baseService.getMethod("discount-coupons").subscribe({next:o=>{this.dataSource=o.data}})}openModal(o){this.$dialog=this.dialog.open(this.createModal,{hasBackdrop:!0,data:o,height:"auto"}).afterClosed().subscribe({next:({refresh:i})=>{i&&this.getAll()}})}confirmRemove(o){this.messageService.confirmRevomeMessage("info.confirmRemove").then(i=>{i.isConfirmed&&this.remove(o)})}remove(o){this.baseService.deleteMethod("discount-coupons/"+o._id).subscribe({next:()=>{this.messageService.succesMessage("succes.succesRemove"),this.getAll()}})}}return e.\u0275fac=function(){let n;return function(i){return(n||(n=t.n5z(e)))(i||e)}}(),e.\u0275cmp=t.Xpm({type:e,selectors:[["app-coupon"]],features:[t.qOj],decls:26,vars:6,consts:[[3,"title","removeButton","description","handleClick"],[1,"content-component"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","coupon"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",3,"matTooltipPosition","matTooltip",4,"matCellDef"],["matColumnDef","description"],["matColumnDef","discount"],["mat-cell","",4,"matCellDef"],["matColumnDef","startDate"],["matColumnDef","endDate"],["matColumnDef","updatedAt"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","",3,"matTooltipPosition","matTooltip"],["mat-cell",""],[3,"click"],["mat-header-row",""],["mat-row",""]],template:function(o,i){1&o&&(t.TgZ(0,"app-header-modules",0),t.NdJ("handleClick",function(){return i.openModal()}),t.qZA(),t.TgZ(1,"div",1)(2,"table",2),t.ynx(3,3),t.YNc(4,A,2,0,"th",4),t.YNc(5,b,2,3,"td",5),t.BQk(),t.ynx(6,6),t.YNc(7,N,2,0,"th",4),t.YNc(8,w,2,3,"td",5),t.BQk(),t.ynx(9,7),t.YNc(10,U,2,0,"th",4),t.YNc(11,S,2,1,"td",8),t.BQk(),t.ynx(12,9),t.YNc(13,B,2,0,"th",4),t.YNc(14,F,3,4,"td",8),t.BQk(),t.ynx(15,10),t.YNc(16,J,2,0,"th",4),t.YNc(17,O,3,4,"td",8),t.BQk(),t.ynx(18,11),t.YNc(19,P,2,0,"th",4),t.YNc(20,Q,3,4,"td",8),t.BQk(),t.ynx(21,12),t.YNc(22,Y,2,0,"th",4),t.YNc(23,I,5,0,"td",8),t.BQk(),t.YNc(24,R,1,0,"tr",13),t.YNc(25,j,1,0,"tr",14),t.qZA()()),2&o&&(t.Q6J("title","Cupones")("removeButton",!1)("description","Aqu\xed podr\xe1s crear, revisar, y editar todos tus cupones"),t.xp6(2),t.Q6J("dataSource",i.dataSource),t.xp6(22),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns))},dependencies:[l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk,D.Hw,y.gM,v.l,d.uU],styles:[".title[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:30px;background:#f2f2f2}.content-component[_ngcontent-%COMP%]{padding:30px}table[_ngcontent-%COMP%]{width:100%}td[_ngcontent-%COMP%]{max-width:100px;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}"]}),e})()}];let q=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[m.Bz.forChild(k),m.Bz]}),e})();var $=a(805),z=a(4429),H=a(6574);let L=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[d.ez,q,$.m8,z.q,v.l,C.p,s.UX,g.i,H.W]}),e})()}}]);